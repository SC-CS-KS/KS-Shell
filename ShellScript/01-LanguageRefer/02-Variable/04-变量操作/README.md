# 04.变量操作

按变量的生存周期来划分，Linux变量可分为两类：
　　永久的：需要修改配置文件，变量永久生效。
　　临时的：使用export命令声明即可，变量在关闭shell时失效。
--------------------------------------------------------------------------------------

## 01.变量设置三种方式

设置变量的三种方法

1.在/etc/profile文件中添加变量
【对所有用户生效(永久的)】

用vi在文件/etc/profile文件中增加变量，该变量将会对Linux下所有用户有效，并且是“永久的”。

例如：编辑/etc/profile文件，添加CLASSPATH变量
　　  # vi /etc/profile
　　  export CLASSPATH=./JAVA_HOME/lib;$JAVA_HOME/jre/lib

注：修改文件后要想马上生效还要运行# source /etc/profile，不然只能在下次重进此用户时生效。
--------------------------------------------------------------------------------------

2.在用户目录下的.bash_profile文件中增加变量
【对单一用户生效(永久的)】

用vi在用户目录下的.bash_profile文件中增加变量，改变量仅会对当前用户有效，并且是“永久的”。

例如：编辑guok用户目录(/home/guok)下的.bash_profile
　　$ vi /home/guok/.bash.profile

　　添加如下内容：
　　export CLASSPATH=./JAVA_HOME/lib;$JAVA_HOME/jre/lib

注：修改文件后要想马上生效还要运行$ source /home/guok/.bash_profile，不然只能在下次重进此用户时生效。
--------------------------------------------------------------------------------------
3.直接运行export命令定义变量
【只对当前shell(BASH)有效(临时的)】

在shell的命令行下直接使用[export 变量名=变量值] 定义变量，该变量只在当前的shell(BASH)或其子shell(BASH)下是有效的，
shell关闭了，变量也就失效了，再打开新shell时就没有这个变量，需要使用的话还需要重新定义。
--------------------------------------------------------------------------------------


## 02.变量赋值

变量赋值

需要给变量赋值时，可以这么写：
     变量名=值 
注意：等号两侧没有空格
--------------------------------------------------------------------------------------
#var1=$var2 var2=sunny
#echo $var1
输出空

#var3=sunny var4=$var3
#echo $var4
sunny

测试Bash 下赋值语句是从左到有执行的。
网上有些说从右往左，可能跟使用的shell有关系。
--------------------------------------------------------------------------------------


## 03.查看变量值

显示变量值
　　$ echo $HOME
　　/home/redbooks

   set命令，显示所有本地SHELL变量。
            包括SHELL中预定义了一些环境变量，且用户自己已经定义过的本地变量也会在其中显示。
   env命令，显示所有的环境变量
--------------------------------------------------------------------------------------

## 04.删除变量

#sunny=chan
#env | grep sunny
输出空

#export sunny
#env | grep sunny
sunny=chan

#unset sunny
#env | grep sunny
输出空
--------------------------------------------------------------------------------------
#sunny=chan               
#set | grep sunny
sunny=chan

#export sunny
#set | grep sunny
_=sunny
sunny=chan

#unset sunny
#set | grep sunny
_=sunny
--------------------------------------------------------------------------------------
*取消变量*   
要取消一个变量，在 bash中可使用unset命令来处理。
与 export一样，unset命令行也同样会作变量替换(这其实就是shell的功能之一)。
因此：
      $ A=B   
      $ B=C   
      $ unset $A   
事实上所取消的变量是B而不是A。

此外，变量一旦经过unset取消之后，其结果是将整个变量拿掉，而不仅是取消其变量值。
如下两行其实是很不一样的：
      $ A=   
      $ unset A   
第一行只是将变量A设定为"空值"(null  value)，但第二行则让变量A不在存在。

虽然用眼睛来看，这两种变量状态在如下命令结果中都是一样的： 
      $ A=   
      $ echo $A   

      $ unset A   
      $ echo $A

请学员务必能识别  null value与 unset的本质区别，这在一些进阶的变量处理上是很严格的。
比方说：  
      $ str=                   #设为  null   
      $ var=${str=expr}        #定义  var   
      $ echo $var   

      $ echo $str   

      $ unset str              #取消
      $ var=${str=expr}        #定义  var   
      $ echo $var   
      expr   
      $ echo $str   
      expr   
--------------------------------------------------------------------------------------

