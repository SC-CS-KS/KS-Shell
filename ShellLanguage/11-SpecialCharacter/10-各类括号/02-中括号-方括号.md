# 02.中括号、方括号[]

## 单中括号

单中括号
01.bash 的内部命令，[和test是等同的。
   if/test结构中的左中括号是调用test的命令标识，右中括号是关闭条件判断的。
   这个命令把它的参数作为比较表达式或者作为文件测试，并且根据比较的结果来返回一个退出状态码。
   if/test结构中并不是必须右中括号，但是新版的Bash中要求必须这样。

02.test和[]中可用的比较运算符只有==和!=，两者都是用于字符串比较的，不可用于整数比较，整数比较只能使用-eq，-gt这种形式。
  无论是字符串比较还是整数比较都不支持大于号小于号。如果实在想用，对于字符串比较可以使用转义形式。
  如比较"ab"和"bc"：
  [ ab \< bc ]，结果为真，也就是返回状态为0。
  [ ]中的逻辑与和逻辑或使用-a 和-o 表示。

03.字符范围
 用作正则表达式的一部分，描述一个匹配的字符范围。
作为test用途的中括号内不能使用正则。

04.在一个array 结构的上下文中，中括号用来引用数组中每个元素的编号。
------------------------------------------------------------------------------------

# 双中括号

双中括号
01.[[是 bash 程序语言的关键字。
   并不是一个命令，[[ ]] 结构比[ ]结构更加通用。
   在 [[ 和 ]] 之间所有的字符都不会发生文件名扩展 或者 单词分割，但是会发生 参数扩展 和 命令替换。

02.支持字符串的模式匹配，使用=~操作符时甚至支持shell的正则表达式。
字符串比较时可以把右边的作为一个模式，而不仅仅是一个字符串。
 比如[[ hello == hell? ]]，结果为真。
 [[ ]] 中匹配字符串或通配符，不需要引号。

03.使用[[ ... ]]条件判断结构，而不是[ ... ]，能够防止脚本中的许多逻辑错误。
   比如，&&、||、<和> 操作符能够正常存在于[[ ]]条件判断结构中，但是如果出现在[ ]结构中的话，会报错。

04.bash把双中括号中的表达式看作一个单独的元素，并返回一个退出状态码。
shell> [[ pwd ]] && echo 'OK'
OK
-------------------------------------------------------------------------------------------------------------

# $[ ]

bash shell为了保持跟Bourne shell兼容而包含了expr命令，但它同样也提供了一个执行数学表达式更简单的方法。
在bash shell中，在将一个数学运算结果赋给某个变量时，你可以用美元符和方括号($[ operation ])将数学表达式圈起来： 

$ var1=$[1 + 5] 
$ echo $var1 
6 
$ var2=$[$var1 * 2] 
$ echo $var2 
12 
$ 

用方括号来执行shell数学运算比用expr命令方便很多，这种技术在shell脚本中也能工作。
同样，在使用方括号来计算公式时，不用担心shell会误解乘号或其他符号。
shell知道它不是通配符，因为它在方括号内。
